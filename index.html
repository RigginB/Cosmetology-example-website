<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hair by Sierra</title>

<style>
  :root{
    /* Baby pink on black */
    --bg:#0b0b0e;
    --panel:#111116;
    --panel2:#15151c;
    --ink:#ffffff;
    --muted:rgba(255,255,255,.74);
    --line:rgba(255,255,255,.10);
    --shadow:0 18px 44px rgba(0,0,0,.55);

    --pink:#ff8fc6;        /* baby pink accent */
    --pink2:#ffd6ea;       /* very light pink */
    --pinkGlow:rgba(255,143,198,.22);

    --good:#2fd07a;
    --bad:#ff6a7a;

    --r:18px;
    --r2:26px;
  }

  *{box-sizing:border-box}
  html{scroll-behavior:smooth;}
  @media (prefers-reduced-motion: reduce){
    html{scroll-behavior:auto;}
    .track,.reviewTrack{animation:none !important;}
  }

  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto,Arial,sans-serif;
    background:
      radial-gradient(1200px 700px at 15% 0%, rgba(255,143,198,.10), transparent 60%),
      radial-gradient(1000px 600px at 95% 5%, rgba(255,214,234,.08), transparent 55%),
      var(--bg);
    color:var(--ink);
    line-height:1.55;
  }

  a{color:inherit;text-decoration:none}
  .wrap{max-width:1180px;margin:0 auto;padding:0 18px}

  /* Top bar */
  .topbar{
    position:sticky; top:0; z-index:50;
    background:rgba(11,11,14,.78);
    backdrop-filter: blur(12px);
    border-bottom:1px solid var(--line);
  }
  .topbar .wrap{
    display:flex; align-items:center; justify-content:space-between;
    padding:14px 18px; gap:12px;
  }
  .brand{
    display:flex; align-items:center; gap:10px;
    font-weight:950; letter-spacing:.2px;
  }
  .dot{width:10px;height:10px;border-radius:50%;background:var(--pink);display:inline-block; box-shadow:0 0 0 6px var(--pinkGlow)}
  .nav{
    display:flex; align-items:center; gap:14px;
    color:var(--muted);
    font-weight:850;
    flex-wrap:wrap;
    justify-content:flex-end;
  }

  .btn{
    display:inline-flex; align-items:center; justify-content:center;
    padding:12px 18px; border-radius:999px;
    border:1px solid var(--pink);
    background:var(--pink);
    color:#110812;
    font-weight:950; cursor:pointer;
    box-shadow:0 14px 30px var(--pinkGlow);
  }
  .btn.ghost{
    background:transparent;
    color:var(--ink);
    border-color:rgba(255,255,255,.18);
    box-shadow:none;
  }
  .btn.small{padding:10px 14px;font-size:.95rem}

  .pill{
    font-size:.9rem;
    font-weight:950;
    padding:8px 10px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.16);
    background:rgba(255,255,255,.04);
    white-space:nowrap;
    color:rgba(255,255,255,.86);
  }
  .pill.pink{
    border-color:rgba(255,143,198,.35);
    background:linear-gradient(180deg, rgba(255,143,198,.14), rgba(255,255,255,.03));
    color:rgba(255,255,255,.92);
  }

  /* Sections */
  section{padding:62px 0}
  .sectionHead{
    display:flex; align-items:flex-end; justify-content:space-between;
    gap:18px; margin-bottom:16px;
  }
  .sectionHead h2{margin:0;font-size:2.05rem}
  .sectionHead p{margin:0;color:var(--muted);max-width:720px;font-weight:750}

  /* Hero */
  .hero{padding:44px 0 10px}
  .heroGrid{
    display:grid;
    grid-template-columns: 1.1fr .9fr;
    gap:16px;
    align-items:stretch;
  }
  @media (max-width: 980px){ .heroGrid{grid-template-columns:1fr} }

  .heroLeft{
    border-radius:var(--r2);
    padding:34px;
    background:
      linear-gradient(115deg, rgba(0,0,0,.72), rgba(0,0,0,.18)),
      url("https://images.unsplash.com/photo-1560066984-138dadb4c035?auto=format&fit=crop&w=2000&q=80")
      center/cover no-repeat;
    box-shadow:var(--shadow);
    min-height:520px;
    display:flex;
    flex-direction:column;
    justify-content:flex-end;
    position:relative;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.08);
  }

  .kicker{
    opacity:.92;
    font-weight:950;
    letter-spacing:.18em;
    text-transform:uppercase;
    font-size:.82rem
  }
  h1{margin:12px 0 10px; font-size:3.05rem; line-height:1.05}
  @media (max-width: 520px){ h1{font-size:2.35rem} }
  .sub{max-width:680px; font-size:1.08rem; color:rgba(255,255,255,.90); font-weight:700}
  .heroCtas{display:flex; gap:12px; flex-wrap:wrap; margin-top:18px}

  .heroRight{
    border-radius:var(--r2);
    background:linear-gradient(180deg, rgba(255,143,198,.10), rgba(255,255,255,.03));
    box-shadow:var(--shadow);
    padding:22px;
    min-height:520px;
    border:1px solid rgba(255,255,255,.10);
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  .heroRight h2{margin:0;font-size:1.45rem}
  .heroRight p{margin:0;color:var(--muted);font-weight:720}
  .hr{height:1px;background:rgba(255,255,255,.12);margin:6px 0}

  .contactRow{
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:10px;
  }
  @media (max-width: 520px){ .contactRow{grid-template-columns:1fr} }
  .contactCard{
    border:1px solid rgba(255,255,255,.12);
    border-radius:16px;
    padding:12px;
    background:rgba(0,0,0,.20);
  }
  .contactCard b{display:block}
  .contactCard span{color:rgba(255,255,255,.78);font-weight:850}

  /* Top services cards */
  .cards{
    display:grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap:16px;
  }
  @media (max-width: 980px){ .cards{grid-template-columns: repeat(2, minmax(0, 1fr));} }
  @media (max-width: 560px){ .cards{grid-template-columns: 1fr;} }

  .card{
    border-radius:var(--r2);
    overflow:hidden;
    background:rgba(255,255,255,.03);
    box-shadow:var(--shadow);
    border:1px solid rgba(255,255,255,.10);
    cursor:pointer;
    transition: transform .14s ease, outline-color .14s ease;
    min-height:330px;
    display:flex;
    flex-direction:column;
  }
  .card:hover{transform: translateY(-2px)}
  .card.sel{outline:3px solid var(--pink); outline-offset:2px}

  .cardImg{
    height:185px;
    background-size:cover;
    background-position:center;
    position:relative;
  }
  .cardImg:after{
    content:"";
    position:absolute; inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.70));
  }
  .cardTag{
    position:absolute; left:14px; bottom:14px;
    color:#fff; z-index:2;
    font-weight:950;
    font-size:1.05rem;
    letter-spacing:.2px;
  }
  .cardBody{padding:14px 16px 18px}
  .cardBody p{margin:8px 0 0; color:rgba(255,255,255,.78); font-weight:730}
  .meta{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;font-weight:950}
  .chip{
    background:rgba(255,143,198,.12);
    border:1px solid rgba(255,143,198,.28);
    padding:8px 10px;
    border-radius:999px;
    font-size:.92rem;
    color:rgba(255,255,255,.92);
  }

  /* Slider (recent work) */
  .sliderShell{
    border-radius:var(--r2);
    background:rgba(255,255,255,.03);
    box-shadow:var(--shadow);
    border:1px solid rgba(255,255,255,.10);
    overflow:hidden;
  }
  .sliderTop{
    padding:16px;
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
    gap:12px;
    flex-wrap:wrap;
    border-bottom:1px solid rgba(255,255,255,.10);
  }
  .sliderTop h3{margin:0;font-size:1.35rem}
  .sliderTop span{color:var(--muted);font-weight:780}

  .marquee{
    display:flex;
    gap:12px;
    padding:16px;
    overflow:hidden;
    position:relative;
    background:linear-gradient(180deg, rgba(255,143,198,.10), rgba(255,255,255,.02));
  }
  .track{
    display:flex;
    gap:12px;
    width:max-content;
    animation: scroll 34s linear infinite;
  }
  .marquee:hover .track{animation-play-state: paused;}
  @keyframes scroll{
    0%{ transform: translateX(0); }
    100%{ transform: translateX(-50%); }
  }
  .shot{
    width:260px;
    height:170px;
    border-radius:18px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.12);
    background:#101016;
    flex:0 0 auto;
    position:relative;
  }
  .shot img{width:100%; height:100%; object-fit:cover; display:block}
  .shotLabel{
    position:absolute;
    left:10px; bottom:10px;
    background:rgba(0,0,0,.55);
    color:#fff;
    padding:8px 10px;
    border-radius:999px;
    font-weight:950;
    font-size:.9rem;
    border:1px solid rgba(255,255,255,.10);
  }

  /* Reviews */
  .reviews{
    border-radius:var(--r2);
    background:rgba(255,255,255,.03);
    box-shadow:var(--shadow);
    border:1px solid rgba(255,255,255,.10);
    overflow:hidden;
  }
  .reviewsTop{
    padding:16px;
    display:flex;
    justify-content:space-between;
    align-items:flex-end;
    gap:12px;
    flex-wrap:wrap;
    border-bottom:1px solid rgba(255,255,255,.10);
  }
  .reviewsTop h3{margin:0}
  .reviewsTop .noteSmall{color:var(--muted);font-weight:780}

  .reviewMarquee{
    display:flex;
    gap:12px;
    padding:16px;
    overflow:hidden;
    background:linear-gradient(180deg, rgba(255,143,198,.10), rgba(255,255,255,.02));
  }
  .reviewTrack{
    display:flex;
    gap:12px;
    width:max-content;
    animation: scroll2 28s linear infinite;
  }
  .reviewMarquee:hover .reviewTrack{animation-play-state: paused;}
  @keyframes scroll2{
    0%{ transform: translateX(0); }
    100%{ transform: translateX(-50%); }
  }
  .review{
    width:320px;
    border-radius:18px;
    border:1px solid rgba(255,255,255,.12);
    background:rgba(0,0,0,.20);
    padding:14px;
    flex:0 0 auto;
  }
  .review b{display:block}
  .stars{letter-spacing:2px;color:var(--pink);font-weight:950}
  .review p{margin:10px 0 0;color:rgba(255,255,255,.78);font-weight:730}

  /* Booking */
  .bookingShell{
    background:linear-gradient(180deg, rgba(255,143,198,.10), rgba(255,255,255,.02));
    color:#fff;
    border-radius:26px;
    padding:18px;
    box-shadow:var(--shadow);
    border:1px solid rgba(255,255,255,.10);
  }
  .bookingGrid{
    display:grid;
    grid-template-columns: 1.05fr .95fr;
    gap:14px;
    margin-top:12px;
  }
  @media (max-width: 980px){ .bookingGrid{grid-template-columns:1fr} }

  .panel{
    background:rgba(0,0,0,.22);
    border:1px solid rgba(255,255,255,.12);
    border-radius:22px;
    padding:14px;
  }
  .panel h3{margin:0 0 12px}
  .small{color:rgba(255,255,255,.78);font-weight:780;font-size:.95rem}

  .calendar{
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    gap:8px;
  }
  .dow{opacity:.75;font-weight:950;font-size:.82rem;text-align:center}
  .day{
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.10);
    border-radius:14px;
    padding:10px 0;
    text-align:center;
    cursor:pointer;
    user-select:none;
    font-weight:950;
    color:rgba(255,255,255,.92);
  }
  .day.muted{opacity:.35;cursor:not-allowed}
  .day.sel{background:var(--pink);color:#110812;border-color:var(--pink)}

  .times{
    margin-top:12px;
    display:grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap:10px;
  }
  @media (max-width: 520px){ .times{grid-template-columns: repeat(2, minmax(0, 1fr));} }
  .timeBtn{
    border-radius:999px;
    padding:10px 10px;
    text-align:center;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(255,255,255,.06);
    cursor:pointer;
    font-weight:950;
    color:rgba(255,255,255,.92);
  }
  .timeBtn.sel{background:var(--pink);color:#110812;border-color:var(--pink)}
  .timeBtn.blocked{opacity:.35;cursor:not-allowed}

  .formRow{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  @media (max-width: 520px){ .formRow{grid-template-columns:1fr} }

  input, textarea, select{
    width:100%;
    padding:12px 12px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(0,0,0,.28);
    color:#fff;
    outline:none;
    font-weight:820;
  }
  input::placeholder, textarea::placeholder{color:rgba(255,255,255,.55)}
  textarea{min-height:96px;resize:vertical}

  .submit{
    width:100%;
    margin-top:10px;
    padding:12px 14px;
    border-radius:999px;
    border:1px solid var(--pink);
    background:var(--pink);
    color:#110812;
    font-weight:950;
    cursor:pointer;
  }
  .note{
    margin-top:10px;
    color:rgba(255,255,255,.82);
    font-weight:780;
    font-size:.92rem;
  }
  .note.important{
    padding:10px 12px;
    border-radius:16px;
    border:1px solid rgba(255,143,198,.30);
    background:rgba(255,143,198,.10);
  }

  /* Admin (hidden unless ?admin=1) */
  .adminBar{display:none;margin-top:14px}
  .adminBar.show{display:block}
  .adminGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width: 900px){ .adminGrid{grid-template-columns:1fr} }
  .list{
    border-radius:18px;
    border:1px solid rgba(255,255,255,.12);
    padding:12px;
    min-height:120px;
    background:rgba(0,0,0,.22);
  }
  .item{
    padding:10px;
    border-radius:14px;
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.10);
    margin-bottom:10px;
  }
  .item b{display:block}
  .actions{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
  .aBtn{
    padding:9px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.16);
    background:rgba(255,255,255,.06);color:#fff;font-weight:950;cursor:pointer;
  }
  .aBtn.ok{background:var(--pink);color:#110812;border-color:var(--pink)}
  .aBtn.no{border-color:rgba(255,255,255,.28)}

  footer{
    padding:34px 0 56px;
    color:rgba(255,255,255,.60);
    font-weight:900;
    text-align:center;
  }
</style>
</head>
<body>

<header class="topbar">
  <div class="wrap">
    <div class="brand"><span class="dot"></span> Hair by Sierra</div>
    <nav class="nav">
      <span class="pill pink">Chubbuck • By appointment</span>
      <a href="#services">Services</a>
      <a href="#work">Work</a>
      <a href="#reviews">Reviews</a>
      <a href="#book" class="btn small">Book</a>
    </nav>
  </div>
</header>

<main class="wrap">

  <section class="hero" id="top">
    <div class="heroGrid">
      <div class="heroLeft">
        <div class="kicker">Clean work • calm experience • real results</div>
        <h1>Look expensive. Feel confident.</h1>
        <div class="sub">
          Professional cosmetology services with clear pricing and a booking flow that feels simple.
        </div>
        <div class="heroCtas">
          <a href="#book" class="btn">Book now</a>
          <a href="#services" class="btn ghost">View services</a>
        </div>
        <div class="heroCtas" style="margin-top:14px">
          <span class="pill pink">No overlap</span>
          <span class="pill pink">Straightforward</span>
          <span class="pill pink">Safety-first</span>
        </div>
      </div>

      <div class="heroRight">
        <h2>Contact</h2>
        <div class="contactRow">
          <a class="contactCard" href="tel:+12086375347">
            <b>Call / Text</b>
            <span>208-637-5347</span>
          </a>
          <a class="contactCard" href="mailto:hair.by.sierram@gmail.com">
            <b>Email</b>
            <span>hair.by.sierram@gmail.com</span>
          </a>
        </div>
        <a class="contactCard" href="https://instagram.com/hair.by.sierram" target="_blank" rel="noopener">
          <b>Instagram</b>
          <span>@hair.by.sierram</span>
        </a>

        <div class="hr"></div>
        <p><b>Booking:</b> choose a service → choose a time → request. You’ll get confirmed after approval.</p>
        <a href="#book" class="btn">Schedule me</a>
      </div>
    </div>
  </section>

  <!-- TOP SERVICES -->
  <section id="services">
    <div class="sectionHead">
      <h2>Top services</h2>
      <p>Tap a card to pre-fill booking. Photos are placeholders that match the service type (swap for client work later).</p>
    </div>
    <div class="cards" id="cards"></div>
  </section>

  <!-- RECENT WORK SLIDER -->
  <section id="work">
    <div class="sectionHead">
      <h2>Recent work</h2>
      <p>Slides left-to-right. Hover/touch to pause.</p>
    </div>

    <div class="sliderShell">
      <div class="sliderTop">
        <h3>Gallery</h3>
        <span>Replace with Sierra’s photos later</span>
      </div>

      <div class="marquee">
        <div class="track" id="workTrack"></div>
        <div class="track" id="workTrackClone" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- REVIEWS -->
  <section id="reviews">
    <div class="sectionHead">
      <h2>Reviews</h2>
      <p>Placeholders for layout only. Replace with real reviews before publishing.</p>
    </div>

    <div class="reviews">
      <div class="reviewsTop">
        <h3>What clients say</h3>
        <div class="noteSmall">Hover/touch to pause</div>
      </div>

      <div class="reviewMarquee">
        <div class="reviewTrack" id="reviewTrack"></div>
        <div class="reviewTrack" id="reviewTrackClone" aria-hidden="true"></div>
      </div>
    </div>
  </section>

  <!-- BOOKING -->
  <section id="book">
    <div class="bookingShell">
      <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:flex-end">
        <div>
          <div class="kicker" style="opacity:.90">Book</div>
          <h2 style="margin:10px 0 0;font-size:2.1rem">Request an appointment</h2>
          <div class="small" style="margin-top:8px">This is a static demo. Real confirmations across devices require a booking tool or backend.</div>
        </div>
        <button class="btn small ghost" id="clearDemo" style="border-color:rgba(255,255,255,.30);color:#fff">Clear demo</button>
      </div>

      <div class="bookingGrid">
        <div class="panel">
          <h3>1) Select day</h3>
          <div class="calendar" id="calendar"></div>

          <div style="display:flex;justify-content:space-between;gap:10px;margin-top:14px;flex-wrap:wrap">
            <button class="btn small ghost" id="prevMonth" style="border-color:rgba(255,255,255,.30);color:#fff">Prev</button>
            <div class="small" id="monthLabel" style="font-weight:950"></div>
            <button class="btn small ghost" id="nextMonth" style="border-color:rgba(255,255,255,.30);color:#fff">Next</button>
          </div>

          <div style="margin-top:18px">
            <h3 style="margin:0 0 10px">2) Select time</h3>
            <div class="times" id="times"></div>
            <div class="note" id="slotNote">Select a date to see available times.</div>
          </div>

          <!-- Admin controls are hidden unless ?admin=1 -->
          <div class="adminBar" id="adminBar">
            <div class="note important"><b style="color:var(--pink2)">Private approval view</b><div style="margin-top:6px">Approve/decline requests below. Approved slots block overlaps.</div></div>

            <div class="adminGrid" style="margin-top:12px">
              <div class="list">
                <b>Pending</b>
                <div id="pendingList" style="margin-top:10px"></div>
              </div>
              <div class="list">
                <b>Approved</b>
                <div id="approvedList" style="margin-top:10px"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="panel">
          <h3>3) Details</h3>

          <div class="small" style="margin-bottom:10px">
            Selected: <b id="selService">None</b> • Date: <b id="selDate">—</b> • Time: <b id="selTime">—</b>
          </div>

          <select id="serviceSelect"></select>

          <div style="height:10px"></div>

          <div class="formRow">
            <input id="name" placeholder="Full name" />
            <input id="phone" placeholder="Phone number" />
          </div>

          <div style="height:10px"></div>
          <input id="email" placeholder="Email (optional)" />
          <div style="height:10px"></div>
          <textarea id="notes" placeholder="Notes (inspo, allergies, hair goals, etc.)"></textarea>

          <div id="screening"></div>

          <button class="submit" id="submit">Request booking</button>
          <div class="note important" id="confirm" style="display:none"></div>

          <div class="note" style="margin-top:12px">
            Some services require safety screening (e.g., waxing/peels). If flagged, you may be offered an alternative or reschedule.
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer>© <span id="year"></span> Hair by Sierra</footer>
</main>

<script>
  // Smooth scroll helper for iOS + sticky header offset
  const header = document.querySelector('.topbar');
  const headerH = () => header ? header.offsetHeight : 0;
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', (e)=>{
      const id = a.getAttribute('href');
      if(!id || id === '#') return;
      const el = document.querySelector(id);
      if(!el) return;
      e.preventDefault();
      const y = el.getBoundingClientRect().top + window.pageYOffset - headerH() - 10;
      window.scrollTo({ top:y, behavior:'smooth' });
    });
  });

  // Owner approval view hidden unless ?admin=1 (not mentioned in the public UI)
  const ADMIN = new URLSearchParams(location.search).get("admin") === "1";

  // Demo storage
  const STORE_KEY = "hair_by_sierra_bookings_blackpink_v1";
  function loadStore(){
    try{
      const raw = localStorage.getItem(STORE_KEY);
      return raw ? JSON.parse(raw) : { pending: [], approved: [] };
    }catch(e){
      return { pending: [], approved: [] };
    }
  }
  function saveStore(data){ localStorage.setItem(STORE_KEY, JSON.stringify(data)); }
  function clearStore(){ localStorage.removeItem(STORE_KEY); }

  // Services (12 “top” from screenshot + screened items available in dropdown)
  // Photos are chosen to actually match the category (hair salon / nails / facial / lashes).
  const SERVICES = [
    { id:"haircut_blow", name:"Hair cut with blow style", price:"$16", duration:60, cat:"Hair",
      desc:"Cut + finished blowout so you leave done.",
      img:"https://images.unsplash.com/photo-1521590832167-7bcbfaa6381f?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","cut"] },

    { id:"haircut", name:"Hair cut", price:"$8", duration:45, cat:"Hair",
      desc:"Precision cut that grows out clean.",
      img:"https://images.unsplash.com/photo-1560066984-138dadb4c035?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","cut"] },

    { id:"highlights", name:"Highlights (first bowl)", price:"$50", duration:120, cat:"Hair",
      desc:"Brightening with placement that looks expensive.",
      img:"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","color"] },

    { id:"foil_color", name:"Foil & color", price:"$65", duration:135, cat:"Hair",
      desc:"Dimension + tone for a richer look.",
      img:"https://images.unsplash.com/photo-1595872018818-97555653a011?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","color"] },

    { id:"balayage", name:"Balayage (one bowl)", price:"$50", duration:150, cat:"Hair",
      desc:"Soft, blended brightness with a natural grow-out.",
      img:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","color"] },

    { id:"perm", name:"Perm traditional wrap", price:"$40", duration:120, cat:"Hair",
      desc:"Texture and shape with a clean set and finish.",
      img:"https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","perm"] },

    { id:"scalp", name:"Scalp treatment", price:"$25", duration:45, cat:"Hair",
      desc:"Reset + refresh for buildup and dryness.",
      img:"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","scalp"] },

    { id:"upstyle", name:"Upstyle", price:"$25", duration:60, cat:"Hair",
      desc:"Polished styling for events and photos.",
      img:"https://images.unsplash.com/photo-1522337660859-02fbefca4702?auto=format&fit=crop&w=2000&q=80",
      tags:["hair","styling"] },

    { id:"gel_mani", name:"Gel polish manicure", price:"$18", duration:45, cat:"Nails",
      desc:"Glossy finish with better wear.",
      img:"https://images.unsplash.com/photo-1604654894610-df63bc536371?auto=format&fit=crop&w=2000&q=80",
      tags:["nails","gel"] },

    { id:"acrylic", name:"Full acrylic set", price:"$35", duration:75, cat:"Nails",
      desc:"Structured set with a crisp shape.",
      img:"https://images.unsplash.com/photo-1610992015732-2449b76344bc?auto=format&fit=crop&w=2000&q=80",
      tags:["nails","acrylic"] },

    { id:"lash_lift", name:"Lash Lift", price:"$35", duration:60, cat:"Brow & Lash",
      desc:"Lifted lashes that open the eyes.",
      img:"https://images.unsplash.com/photo-1522337459926-32e9b39a4f9f?auto=format&fit=crop&w=2000&q=80",
      tags:["lashes"] },

    { id:"facial60", name:"60 Minute Facial", price:"$40", duration:60, cat:"Facials",
      desc:"Full reset: cleanse, treatment, finish.",
      img:"https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?auto=format&fit=crop&w=2000&q=80",
      tags:["facials"] },

    /* Screened services (not in top 12 cards, but in dropdown) */
    { id:"brow_wax", name:"Brow Wax", price:"$10", duration:20, cat:"Brow & Lash",
      desc:"Shaping (screening required).",
      img:"https://images.unsplash.com/photo-1522337459926-32e9b39a4f9f?auto=format&fit=crop&w=2000&q=80",
      tags:["wax","brows"], screening:"wax" },

    { id:"chemical_peel", name:"Chemical Peel", price:"$65", duration:60, cat:"Facials",
      desc:"Resurfacing (screening required).",
      img:"https://images.unsplash.com/photo-1582095133179-bfd08e2fc6b3?auto=format&fit=crop&w=2000&q=80",
      tags:["peel"], screening:"peel" }
  ];

  const SCREENING = {
    wax: {
      title: "Waxing screening",
      note: "If any apply, your request will be flagged for an alternative or reschedule.",
      questions: [
        { key:"accutane", label:"Currently on isotretinoin/Accutane OR used it recently", tag:"accutane" },
        { key:"retinoids", label:"Using topical retinoids on the area (tretinoin/Retin-A/adapalene)", tag:"retinoids" },
        { key:"recent_proc", label:"Recent peel/laser/microderm on the area", tag:"recent-procedure" },
        { key:"irritation", label:"Sunburned/irritated/inflamed skin on the area", tag:"irritated-skin" }
      ],
      alternatives: "Alternative: tweezing/threading or reschedule."
    },
    peel: {
      title: "Peel screening",
      note: "If any apply, your request will be flagged and may be switched to a gentler facial or postponed.",
      questions: [
        { key:"accutane", label:"Currently on isotretinoin/Accutane OR used it recently", tag:"accutane" },
        { key:"irritation", label:"Active irritation/open lesions/sunburn on the area", tag:"irritated-skin" },
        { key:"recent_proc", label:"Recent strong exfoliation/laser/microderm", tag:"recent-procedure" }
      ],
      alternatives: "Alternative: gentle facial or postpone."
    }
  };

  // Build top service cards (first 12)
  const cardsEl = document.getElementById("cards");
  const top12 = SERVICES.filter(s => ["brow_wax","chemical_peel"].indexOf(s.id) === -1).slice(0,12);

  top12.forEach(s=>{
    const el = document.createElement("div");
    el.className = "card";
    el.dataset.serviceId = s.id;
    el.innerHTML = `
      <div class="cardImg" style="background-image:url('${s.img}')">
        <div class="cardTag">${s.name}</div>
      </div>
      <div class="cardBody">
        <p>${s.desc}</p>
        <div class="meta">
          <span class="chip">${s.cat}</span>
          <span class="chip">${s.duration} min</span>
          <span class="chip">${s.price}</span>
        </div>
      </div>
    `;
    el.addEventListener("click", ()=> selectService(s.id, true));
    cardsEl.appendChild(el);
  });

  // Work slider (better matching placeholders)
  const WORK_IMAGES = [
    { label:"Color", url:"https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?auto=format&fit=crop&w=1400&q=80" },
    { label:"Highlights", url:"https://images.unsplash.com/photo-1560066984-138dadb4c035?auto=format&fit=crop&w=1400&q=80" },
    { label:"Nails", url:"https://images.unsplash.com/photo-1604654894610-df63bc536371?auto=format&fit=crop&w=1400&q=80" },
    { label:"Facials", url:"https://images.unsplash.com/photo-1582095133179-bfd08e2fc6b3?auto=format&fit=crop&w=1400&q=80" },
    { label:"Lashes", url:"https://images.unsplash.com/photo-1522337459926-32e9b39a4f9f?auto=format&fit=crop&w=1400&q=80" },
    { label:"Styling", url:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&w=1400&q=80" }
  ];
  function fillWorkTrack(trackId){
    const t = document.getElementById(trackId);
    t.innerHTML = "";
    WORK_IMAGES.forEach(x=>{
      const d = document.createElement("div");
      d.className = "shot";
      d.innerHTML = `<img src="${x.url}" alt="${x.label}"><div class="shotLabel">${x.label}</div>`;
      t.appendChild(d);
    });
  }
  fillWorkTrack("workTrack");
  fillWorkTrack("workTrackClone");

  // Reviews placeholders
  const REVIEWS = [
    { stars:5, name:"Alyssa M.", text:"Color came out exactly how I wanted. Clean work, calm vibe, and I felt taken care of." },
    { stars:5, name:"Jordan K.", text:"Haircut grew out perfectly. No awkward phase, it just sat right." },
    { stars:5, name:"Megan S.", text:"Lash lift looks natural but noticeable. Super professional and easy to book." },
    { stars:5, name:"Bri T.", text:"Nails were crisp and lasted. Communication was clear and the appointment ran on time." },
    { stars:5, name:"Hailey P.", text:"Facial was relaxing and my skin looked better immediately. I left glowing." }
  ];
  function stars(n){ return "★★★★★".slice(0,n) + "☆☆☆☆☆".slice(0,5-n); }
  function fillReviews(trackId){
    const t = document.getElementById(trackId);
    t.innerHTML = "";
    REVIEWS.forEach(r=>{
      const d = document.createElement("div");
      d.className = "review";
      d.innerHTML = `
        <div class="stars">${stars(r.stars)}</div>
        <b>${r.name}</b>
        <p>${r.text}</p>
      `;
      t.appendChild(d);
    });
  }
  fillReviews("reviewTrack");
  fillReviews("reviewTrackClone");

  // Booking calendar + slots
  let viewDate = new Date();
  let selectedDay = null;     // YYYY-MM-DD
  let selectedTime = null;    // HH:MM
  let selectedServiceId = top12[0].id;

  const calendarEl = document.getElementById("calendar");
  const monthLabel = document.getElementById("monthLabel");
  const timesEl = document.getElementById("times");
  const slotNote = document.getElementById("slotNote");

  const TIMES = ["08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30"];

  function ymd(d){
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,"0");
    const day = String(d.getDate()).padStart(2,"0");
    return `${y}-${m}-${day}`;
  }
  function slotBlocked(dayKey, time){
    const store = loadStore();
    return store.approved.some(b => b.day === dayKey && b.time === time);
  }

  function renderCalendar(){
    calendarEl.innerHTML = "";
    ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(x=>{
      const d = document.createElement("div");
      d.className = "dow";
      d.textContent = x;
      calendarEl.appendChild(d);
    });

    const year = viewDate.getFullYear();
    const month = viewDate.getMonth();
    monthLabel.textContent = viewDate.toLocaleString(undefined, {month:"long", year:"numeric"});

    const first = new Date(year, month, 1);
    const startDow = first.getDay();
    const daysInMonth = new Date(year, month+1, 0).getDate();

    for(let i=0;i<startDow;i++){
      const blank = document.createElement("div");
      blank.className = "day muted";
      blank.textContent = "";
      calendarEl.appendChild(blank);
    }

    const today = new Date();
    const todayYMD = ymd(today);

    for(let day=1; day<=daysInMonth; day++){
      const d = new Date(year, month, day);
      const key = ymd(d);
      const isPast = key < todayYMD;

      const cell = document.createElement("div");
      cell.className = "day" + (isPast ? " muted" : "") + (key === selectedDay ? " sel" : "");
      cell.textContent = day;

      if(!isPast){
        cell.addEventListener("click", ()=>{
          selectedDay = key;
          selectedTime = null;
          document.getElementById("selDate").textContent = key;
          document.getElementById("selTime").textContent = "—";
          hideConfirm();
          renderCalendar();
          renderTimes();
        });
      }
      calendarEl.appendChild(cell);
    }

    renderTimes();
    renderAdminLists();
  }

  function renderTimes(){
    timesEl.innerHTML = "";
    if(!selectedDay){
      slotNote.textContent = "Select a date to see available times.";
      return;
    }
    slotNote.textContent = "Select a time (approved bookings are blocked).";
    TIMES.forEach(t=>{
      const blocked = slotBlocked(selectedDay, t);
      const b = document.createElement("div");
      b.className = "timeBtn" + (blocked ? " blocked" : "") + (t === selectedTime ? " sel" : "");
      b.textContent = t;
      if(!blocked){
        b.addEventListener("click", ()=>{
          selectedTime = t;
          document.getElementById("selTime").textContent = t;
          hideConfirm();
          renderTimes();
        });
      }
      timesEl.appendChild(b);
    });
  }

  document.getElementById("prevMonth").addEventListener("click", ()=>{
    viewDate = new Date(viewDate.getFullYear(), viewDate.getMonth()-1, 1);
    renderCalendar();
  });
  document.getElementById("nextMonth").addEventListener("click", ()=>{
    viewDate = new Date(viewDate.getFullYear(), viewDate.getMonth()+1, 1);
    renderCalendar();
  });

  // Service select
  const serviceSelect = document.getElementById("serviceSelect");
  function fillServiceSelect(){
    serviceSelect.innerHTML = "";
    SERVICES.forEach(s=>{
      const opt = document.createElement("option");
      opt.value = s.id;
      opt.textContent = `${s.name} • ${s.price}`;
      serviceSelect.appendChild(opt);
    });
  }
  fillServiceSelect();

  function getService(id){
    return SERVICES.find(s => s.id === id) || SERVICES[0];
  }

  function selectService(id, scrollToBook){
    selectedServiceId = id;
    const s = getService(id);
    document.getElementById("selService").textContent = `${s.name} (${s.price})`;

    // highlight card if in top 12
    document.querySelectorAll(".card").forEach(c=>{
      c.classList.toggle("sel", c.dataset.serviceId === id);
    });

    serviceSelect.value = id;
    renderScreening();
    if(scrollToBook){
      const el = document.querySelector("#book");
      const y = el.getBoundingClientRect().top + window.pageYOffset - headerH() - 10;
      window.scrollTo({ top:y, behavior:'smooth' });
    }
  }

  serviceSelect.addEventListener("change", ()=>{
    selectService(serviceSelect.value, false);
  });

  // Screening UI
  const screeningEl = document.getElementById("screening");
  function renderScreening(){
    screeningEl.innerHTML = "";
    const s = getService(selectedServiceId);
    const rule = s.screening ? SCREENING[s.screening] : null;

    if(!rule){
      const ok = document.createElement("div");
      ok.className = "note important";
      ok.innerHTML = `<b style="color:var(--pink2)">Screening</b><div style="margin-top:6px">No special screening required for this service.</div>`;
      screeningEl.appendChild(ok);
      return;
    }

    const box = document.createElement("div");
    box.className = "note important";
    box.innerHTML = `<b style="color:var(--pink2)">${rule.title}</b><div style="margin-top:6px">${rule.note}</div>`;
    screeningEl.appendChild(box);

    rule.questions.forEach(q=>{
      const id = `q_${q.key}`;
      const wrap = document.createElement("div");
      wrap.style.marginTop = "10px";
      wrap.innerHTML = `
        <label style="display:flex;gap:10px;align-items:flex-start;font-weight:850;color:rgba(255,255,255,.90)">
          <input type="checkbox" id="${id}" style="margin-top:4px;transform:scale(1.05)" />
          <span>${q.label}</span>
        </label>
      `;
      screeningEl.appendChild(wrap);
      wrap.querySelector("input").addEventListener("change", updateScreeningStatus);
    });

    const info = document.createElement("div");
    info.className = "note";
    info.id = "screenStatus";
    info.textContent = "If anything applies, your request will be flagged for review.";
    screeningEl.appendChild(info);

    updateScreeningStatus();
  }

  function updateScreeningStatus(){
    const s = getService(selectedServiceId);
    const rule = s.screening ? SCREENING[s.screening] : null;
    const status = document.getElementById("screenStatus");
    if(!rule || !status) return;

    const hits = [];
    rule.questions.forEach(q=>{
      const el = document.getElementById(`q_${q.key}`);
      if(el && el.checked) hits.push(q.tag);
    });

    if(hits.length === 0){
      status.textContent = "Screening looks clear.";
      status.style.color = "rgba(255,255,255,.78)";
    }else{
      status.textContent = `Flagged: ${hits.join(", ")}. ${rule.alternatives}`;
      status.style.color = "rgba(255,180,200,.95)";
    }
  }

  // Confirm box helpers (avoid invisible text)
  const confirmEl = document.getElementById("confirm");
  function showConfirm(msg){
    confirmEl.textContent = msg;
    confirmEl.style.display = "block";
  }
  function hideConfirm(){
    confirmEl.textContent = "";
    confirmEl.style.display = "none";
  }

  // Submit booking (demo)
  document.getElementById("submit").addEventListener("click", ()=>{
    const s = getService(selectedServiceId);

    if(!selectedDay || !selectedTime){
      showConfirm("Select a date and time first.");
      return;
    }
    if(slotBlocked(selectedDay, selectedTime)){
      showConfirm("That time is already booked. Pick another slot.");
      return;
    }

    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const email = document.getElementById("email").value.trim();
    const notes = document.getElementById("notes").value.trim();

    if(!name || !phone){
      showConfirm("Enter your name and phone number to request the booking.");
      return;
    }

    // collect screening flags
    let flags = [];
    if(s.screening){
      const rule = SCREENING[s.screening];
      rule.questions.forEach(q=>{
        const el = document.getElementById(`q_${q.key}`);
        if(el && el.checked) flags.push(q.tag);
      });
    }

    const store = loadStore();
    const req = {
      id: (crypto.randomUUID ? crypto.randomUUID() : String(Date.now())),
      createdAt: new Date().toISOString(),
      serviceId: s.id,
      serviceName: s.name,
      price: s.price,
      day: selectedDay,
      time: selectedTime,
      name, phone, email, notes,
      tags: [...(s.tags||[]), ...flags],
      flagged: flags.length > 0
    };

    store.pending.unshift(req);
    saveStore(store);

    showConfirm(
      req.flagged
        ? "Requested (flagged for review). You may be offered an alternative or a reschedule."
        : "Requested. You’ll be confirmed after approval."
    );

    renderAdminLists();
  });

  // Admin UI (hidden unless ADMIN)
  const adminBar = document.getElementById("adminBar");
  if(ADMIN) adminBar.classList.add("show");

  function renderAdminLists(){
    if(!ADMIN) return;

    const store = loadStore();
    const pendingList = document.getElementById("pendingList");
    const approvedList = document.getElementById("approvedList");
    pendingList.innerHTML = "";
    approvedList.innerHTML = "";

    if(store.pending.length === 0){
      pendingList.innerHTML = `<div class="small">No pending requests.</div>`;
    }else{
      store.pending.forEach(req=>{
        const item = document.createElement("div");
        item.className = "item";
        const tagText = (req.tags && req.tags.length) ? req.tags.join(", ") : "none";
        item.innerHTML = `
          <b>${req.day} • ${req.time} — ${req.serviceName} (${req.price})</b>
          <div class="small">${req.name} • ${req.phone}${req.email ? " • " + req.email : ""}</div>
          <div class="small">Tags: <b>${tagText}</b>${req.flagged ? " • <b style='color:rgba(255,180,200,.95)'>FLAGGED</b>" : ""}</div>
          ${req.notes ? `<div class="small" style="margin-top:6px;opacity:.9">Notes: ${escapeHtml(req.notes)}</div>` : ""}
          <div class="actions">
            <button class="aBtn ok">Accept</button>
            <button class="aBtn no">Decline</button>
          </div>
        `;
        const [acceptBtn, declineBtn] = item.querySelectorAll("button");
        acceptBtn.addEventListener("click", ()=> acceptReq(req.id));
        declineBtn.addEventListener("click", ()=> declineReq(req.id));
        pendingList.appendChild(item);
      });
    }

    if(store.approved.length === 0){
      approvedList.innerHTML = `<div class="small">No approved bookings.</div>`;
    }else{
      store.approved.forEach(req=>{
        const item = document.createElement("div");
        item.className = "item";
        item.innerHTML = `
          <b>${req.day} • ${req.time} — ${req.serviceName} (${req.price})</b>
          <div class="small">${req.name} • ${req.phone}</div>
          <div class="actions">
            <button class="aBtn no">Cancel</button>
          </div>
        `;
        item.querySelector("button").addEventListener("click", ()=> cancelApproved(req.id));
        approvedList.appendChild(item);
      });
    }

    renderTimes();
  }

  function acceptReq(id){
    const store = loadStore();
    const idx = store.pending.findIndex(x=>x.id===id);
    if(idx === -1) return;
    const req = store.pending[idx];

    if(store.approved.some(b => b.day === req.day && b.time === req.time)){
      alert("That time is already approved for someone else.");
      return;
    }
    store.pending.splice(idx,1);
    store.approved.unshift(req);
    saveStore(store);
    renderAdminLists();
  }

  function declineReq(id){
    const store = loadStore();
    store.pending = store.pending.filter(x=>x.id!==id);
    saveStore(store);
    renderAdminLists();
  }

  function cancelApproved(id){
    const store = loadStore();
    store.approved = store.approved.filter(x=>x.id!==id);
    saveStore(store);
    renderAdminLists();
  }

  document.getElementById("clearDemo").addEventListener("click", ()=>{
    clearStore();
    showConfirm("Demo bookings cleared.");
    renderAdminLists();
    renderTimes();
  });

  function escapeHtml(str){
    return str.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }

  // Init
  document.getElementById("year").textContent = new Date().getFullYear();
  document.getElementById("selDate").textContent = "—";
  document.getElementById("selTime").textContent = "—";
  selectService(top12[0].id, false);
  renderCalendar();
  hideConfirm();
</script>

</body>
</html>
